(window.webpackJsonpassignment1=window.webpackJsonpassignment1||[]).push([[0],{32:function(e,t,a){e.exports=a(44)},37:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),o=a.n(c),l=(a(37),a(10)),s=a(11),i=a(13),u=a(12),m=a(14),p=a(17),d=a(15),f=a(20),h=a(2),v=a(5),b=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={formVal:a.props.formVal},a.handleSubmit=function(e){e.preventDefault(),a.props.setVal(a.state.formVal)},a.handleChange=function(e){a.setState({formVal:e.target.value})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"search-bar"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",id:"search",placeholder:"Search for mutual funds...",value:this.state.formVal,onChange:this.handleChange}),r.a.createElement("input",{type:"submit",value:"Search"})))}}]),t}(n.Component),E=Object(v.b)((function(e){return{formVal:e.formVal}}),(function(e){return{setVal:function(t){e({type:"UPDATE_SEARCH",search:t})}}}))(b),O=function(e){var t=e.details,a=t.name,c=t.open,o=t.category,l=t.asset_aum,s=t.return_3yr,i=t.riskometer,u=t.minimum_investment,m=t.rating;o=o[0].toUpperCase()+o.slice(1),i=(i=(i=i.split("_")).map((function(e){return e[0].toUpperCase()+e.slice(1)}))).join(" ");var p=c?"-":"+",d="";return c&&(d="show"),r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"accordion"},r.a.createElement("div",{className:"name"},a,r.a.createElement("span",{onClick:e.toggle,style:{cursor:"pointer"}},p)),r.a.createElement("div",{className:d,id:"hidden"},r.a.createElement("div",{className:"detail-wrapper"},r.a.createElement("div",{className:"details"},"Category - ",o),r.a.createElement("div",{className:"details"},"Minimum Subscription - Rs.",u),r.a.createElement("div",{className:"details"},"3 Year Return - ",s,"%"),r.a.createElement("div",{className:"details"},"Risk - ",i),r.a.createElement("div",{className:"details"},"Asset_Aum - ",l),r.a.createElement("div",{className:"details"},"Rating - ",m)),r.a.createElement("div",{className:"btn-wrapper"},e.children))))};function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var y=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={data:[],selected:Object(h.a)(a.props.selected),count:0,num:10,error:null},a.clearAll=function(){a.setState({selected:[]}),a.props.clear()},a.toggle=function(e){var t=Object(h.a)(a.state.data),n=t.findIndex((function(t){return t.details_id===e}));t[n].open=!t[n].open,a.setState({data:Object(h.a)(t)})},a.add=function(e){a.state.selected.length<5?(a.setState({selected:[].concat(Object(h.a)(a.state.selected),[e])}),a.props.toAdd(e)):(a.setState({error:"Cannot compare more than 5 funds!!!"}),setTimeout((function(){a.setState({error:null})}),3e3))},a.remove=function(e){var t=Object(h.a)(a.state.selected),n=t.indexOf(e);t.splice(n,1),a.setState({selected:Object(h.a)(t)}),a.props.toRemove(e)},a.getData=function(e){if(""!==e){var t={search:e,rows:1,offset:1};fetch("https://api.piggy.co.in/v2/mf/search/",{method:"POST",authorization:"a41d2b39e3b47412504509bb5a1b66498fb1f43a",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){var t=e.data.search_results;t=t.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(a,!0).forEach((function(t){Object(f.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{open:!1})})),a.setState({data:Object(h.a)(t),count:t.length,num:10})})).catch((function(e){console.log(e),a.setState({error:e.message}),setTimeout((function(){a.setState({error:null})}),3e3)}))}else a.setState({data:[]})},a.handleClick=function(e){e.preventDefault();var t=a.state,n=t.count,r=t.num;n-r<10?a.setState({num:n}):a.setState({num:r+10})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.formVal;this.getData(e)}},{key:"componentDidUpdate",value:function(e){if(e.formVal!==this.props.formVal){var t=this.props.formVal;this.getData(t)}}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.num,c=t.selected,o=t.count,l=t.error,s=Object(h.a)(a);s=(s=s.splice(0,n)).map((function(t){var a=t.details_id,n=c.filter((function(e){return e===a})).length,o=r.a.createElement("button",{className:"compare-btn add",onClick:function(){return e.add(a)}},"Add to Compare");return 1===n&&(o=r.a.createElement("button",{className:"compare-btn remove",onClick:function(){return e.remove(a)}},"Remove from Compare")),r.a.createElement(O,{key:a,details:t,toggle:function(){return e.toggle(a)}},o)}));var i=null,u=!1;return c.length>0&&(u=!0),l&&(i=r.a.createElement("div",{className:"error"},r.a.createElement("p",null,l))),r.a.createElement("div",null,r.a.createElement(E,null),i,r.a.createElement("div",{className:"all-purpose-btn"},r.a.createElement("button",{disabled:!u,onClick:this.clearAll},"Clear Compare List")),r.a.createElement("div",{className:"display"},s),a.length>0&&n<o?r.a.createElement("div",{className:"all-purpose-btn"},r.a.createElement("button",{onClick:this.handleClick},"Show More")):null)}}]),t}(n.Component),j=Object(v.b)((function(e){return{formVal:e.formVal,selected:Object(h.a)(e.selected)}}),(function(e){return{toAdd:function(t){return e({type:"ADD",id:t})},toRemove:function(t){return e({type:"REMOVE",id:t})},clear:function(){return e({type:"CLEAR"})}}}))(y),k=a(24),w=a.n(k),N=a(30),S=Object(v.b)(!1,(function(e){return{remove:function(t){return e({type:"REMOVE",id:t})}}}))((function(e){var t={Name:"name",Category:"category",Rating:"rating","Minimum-Subscription":"minimum_subscription","3 Year Return":"return_3yr",Risk:"riskometer","Asset-Aum":"asset_aum",Benchmark:"benchmark_text"},a=e.values,n=[],c=function(c){var o=r.a.createElement("div",{key:c,className:"row"},r.a.createElement("div",{className:"head"},c),a.map((function(a){var n=a[t[c]],o=null;return"Name"===c&&(o=r.a.createElement("button",{title:"Click to Remove",className:"remove-compare",onClick:function(){return e.remove(a.scheme_details_id)}},"X")),"3 Year Return"===c&&(n+="%"),r.a.createElement("div",{key:n+Math.random()},n," ",o)})));n.push(o)};for(var o in t)c(o);return n})),C=function(e){for(var t=e.details,a=[],n=function(e){var n=100*Math.random(),c=r.a.createElement("div",{key:n,className:"row"},r.a.createElement("div",{className:"head"},"#",e),t.map((function(t){var a="-",n=Math.random()+e*Math.random();return void 0!==t[e-1]&&(n=(a=t[e-1].script||t[e-1].sector)+e+Math.random()),r.a.createElement("div",{key:n},a)})));a.push(c)},c=1;c<=5;c++)n(c);return a},_=function(e){var t={From:"fromdate",To:"todate",Percent:"percent_change"},a=e.values,n=[],c=function(e){var c=r.a.createElement("div",{key:e,className:"row"},r.a.createElement("div",{className:"head"},e),a.map((function(a){var n=a[t[e]];return"Percent"===e&&(n=n.toFixed(2)+"%"),r.a.createElement("div",{key:n+Math.random()},n)})));n.push(c)};for(var o in t)c(o);return n},A=function(){return r.a.createElement("div",{className:"loader"})},D=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={compare:[],loading:!0},a.clearAll=function(){a.setState({compare:[]}),a.props.clear()},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(e){var t=Object(h.a)(e.selected),a=Object(h.a)(this.props.selected);if(t.length>a.length){var n=null;t.forEach((function(e){-1===a.indexOf(e)&&(n=e)}));var r=Object(h.a)(this.state.compare),c=r.findIndex((function(e){return n===e.id}));r.splice(c,1),this.setState({compare:Object(h.a)(r)})}}},{key:"componentDidMount",value:function(){var e=this,t=this.props.selected;if(t.length>0){var a;a=t.map(function(){var e=Object(N.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.piggy.co.in/v1/mf/?key=".concat(t));case 2:return a=e.sent,e.abrupt("return",a.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Promise.all(a).then((function(a){var n=a.map((function(e,a){var n=e.data,r=n.holdings,c=n.mutual_fund;return{top_holdings:r.top_10_holdings.values.splice(0,5),top_sectors:r.top_5_sectors.values.splice(0,5),best_return:c.best_return,details:c.details,id:t[a]}}));e.setState({compare:Object(h.a)(n),loading:!1})})).catch((function(e){return console.log(e)}))}else this.setState({loading:!1})}},{key:"render",value:function(){var e=this.state.loading,t=null,a=!1;if(!e)if(this.state.compare.length>0){a=!0;var c=this.state.compare,o=c.map((function(e){return e.details})),l=c.map((function(e){return e.top_holdings})),s=c.map((function(e){return e.top_sectors})),i=c.map((function(e){return e.best_return}));t=r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"headers"},"Basic Details"),r.a.createElement(S,{values:o}),r.a.createElement("div",{className:"headers"},"Best Returns"),r.a.createElement(_,{values:i}),r.a.createElement("div",{className:"headers"},"Top 5 Holdings"),r.a.createElement(C,{type:"holdings",details:l}),r.a.createElement("div",{className:"headers"},"Top 5 Sectors"),r.a.createElement(C,{type:"sectors",details:s}))}else t=r.a.createElement("h2",{style:{textAlign:"center"}},"Please add some Mutual Fund Schemes to Compare");return r.a.createElement("div",{className:"compare"},r.a.createElement("div",{className:"all-purpose-btn"},a?r.a.createElement("button",{onClick:this.clearAll},"Clear All"):null),e?r.a.createElement(A,null):t)}}]),t}(n.Component),P=Object(v.b)((function(e){return{selected:e.selected}}),(function(e){return{clear:function(){return e({type:"CLEAR"})}}}))(D),R=Object(v.b)((function(e){return{count:e.selected.length}}))((function(e){return r.a.createElement("div",{className:"navbar"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(p.b,{to:"/"},"Search")),r.a.createElement("li",{id:"count"},r.a.createElement(p.b,{to:"/compare"},"Compare"),r.a.createElement("span",null,e.count))))})),V=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(p.a,{basename:"/ReactApp"},r.a.createElement(R,null),r.a.createElement("div",null,r.a.createElement(d.a,{path:"/",component:j,exact:!0}),r.a.createElement(d.a,{path:"/compare",component:P})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var M=a(21);function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(a,!0).forEach((function(t){Object(f.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var U={formVal:"",selected:[]},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;if("UPDATE_SEARCH"===t.type){var a=t.search;return T({},e,{formVal:a})}if("ADD"===t.type){var n=Object(h.a)(e.selected);return n.push(t.id),T({},e,{selected:n})}if("REMOVE"===t.type){var r=Object(h.a)(e.selected),c=r.indexOf(t.id);return r.splice(c,1),T({},e,{selected:Object(h.a)(r)})}return"CLEAR"===t.type?T({},e,{selected:[]}):e},F=Object(M.b)(B);o.a.render(r.a.createElement(v.a,{store:F},r.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[32,1,2]]]);
//# sourceMappingURL=main.b4fca996.chunk.js.map